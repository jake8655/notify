<html>

<head>
  <link rel="stylesheet" href="/public/output.css" />
</head>

<body class="flex justify-end font-poppins text-white">
  <main class="toast"></main>
  <!-- <button -->
  <!--   class="absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] rounded-full bg-gray-400 p-4 shadow transition-colors hover:bg-red-400"> -->
  <!--   Notification -->
  <!-- </button> -->

  <script type="module">
    import autoAnimate from '../node_modules/@formkit/auto-animate/index.mjs';

    const toast = document.querySelector('.toast');
    autoAnimate(toast);

    const eventListener = ({data: {title, body, color, duration}}) => {
      if (!title || !body) return;

      const notifyElement = document.createElement('div');

      notifyElement.classList.add('notification');
      notifyElement.style.setProperty('--color', color);
      notifyElement.style.setProperty('--duration', duration);

      const titleElement = document.createElement('h3');
      const bodyElement = document.createElement('p');
      titleElement.innerText = title;
      bodyElement.innerText = body;

      notifyElement.append(titleElement);
      notifyElement.append(bodyElement);

      toast.prepend(notifyElement);

      setTimeout(() => {
        notifyElement.style.setProperty('--fill', 100);
      }, 500);
      setTimeout(() => {
        notifyElement.remove();
      }, duration);
    };

    window.addEventListener('message', eventListener);

      // const btn = document.querySelector('button');
      // btn.addEventListener('click', () => {
      //   eventListener({
      //     data: {
      //       title: 'Hello from the other side',
      //       // body: `There once was a ship that put to sea. The name of the ship was the Billy of Tea. The winds blew up, her bow dipped down. Oh blow, my bully boys, blow(huh). Soon may the Wellerman come. To bring us sugar and tea and rum. One day, when the tonguing is done. We'll take our leave and go. She'd not been two weeks from shore. When down on her a right whale bore. The captain called all hands and swore. He'd take that whale in tow (huh). Soon may the Wellerman come. To bring us sugar and tea and rum. One day, when the tonguing is done. We'll take our leave and go. Da - da - da - da - da. Da- da - da - da - da - da - da. Da- da - da - da - da - da - da - da - da - da - da. Before the boat had hit the water. The whale's tail came up and caught her. All hands to the side, harpooned and fought her. When she dived down low(huh).`,
      //       body: 'Your changes have just been successfully deployed!',
      //       color: 'red',
      //       duration: 5000,
      //     },
      //   });
      // });
  </script>
</body>

</html>
